---
layout: post
title: PHPStorm 使用笔记
subtitle: 日常使用的技巧
catalog: true
tag: 工具
---

### 激活软件

目前我所知的激活代理有好些个，说两个最常用的被人熟知的

1. 成都没有派对
2. lanyu idea

其他的比较小众，我这里有些收藏着其他自己搭建代理服务器的办法，知道的人越少越不容易被屏蔽，暂不贴。

### 插件与主题

[PHPStorm 的插件商城](http://plugins.jetbrains.com/phpstorm)（都是英文看不懂），选几个我觉得还可以的插件：

| 插件或主题名称                 | 描述                                                |
| ------------------------------ | --------------------------------------------------- |
| String Manipulation            | 字符串处理，可以进行md5，base64右键转换指定字符串等 |
| activate-power-mode            | 跳动的代码                                          |
| PHP Advanced AutoComplete      | php 提示，主要是 header 函数                        |
| CodeGlance                     | 参照 sublime 的右侧小地图                           |
| http://www.material-theme.com/ | 主题1                                               |

之前用过的 `IdeaVim` 和  `.env`  就不说了，`IdeaVim` 反正我是用不习惯。

#### 安装方法

1. `ctrl + alt + s` 打开设置
2. 选择 `Plugins` , 右下角有三种安装方式：`INSTALL JETBRAINS PLUGINS`(官方插件)、`BROWSE RESPOSITORYS...`(源代码模式，一般在 GitHub 上)、`INSTALL PLUGINS DISK`(从本地磁盘安装)
3. 安装成功之后关闭 Setting 窗口，IDE 会弹窗 RESTART（重启）

注：每个插件的使用方法参考对应的文档。

### PHP 代码格式化

以下是常用配置：

* 所有变量、常量、数组等号对齐
* 很短在一行，很长换行
* 使用 [] 代替 array()

#### 详解配置

`ctrl + alt + s` 打开设置，依次点开 **Editor > Code Style > PHP**

##### 

<table>
    <thead>
    <th>选项卡</th>
    <th>模块</th>
    <th>选项</th>
    <th>解释</th>
    </thead>
    <tbody>
    <tr>
        <td rowspan = "8">
            Wrapping and Braces(包装和支架)
        </td>
        <td rowspan = "2">
            Keep when reformatting
        </td>
        <td>
            Control statement in one line
        </td>
        <td>
            控制声明在一行
        </td>
    </tr>
    <tr>
        <td>
            Simple methods in one line
        </td>
        <td>
            简单的方法在一行
        </td>
    </tr>
    <tr>
        <td rowspan = "2">
            'switch' statement
        </td>
        <td>
            Indent 'case' branches
        </td>
        <td>
            case 缩进
        </td>
    </tr>
    <tr>
        <td>
            Indent 'break' from 'case
        </td>
        <td>
            case 追赠 break
        </td>
    </tr>
    <tr>
        <td>
            Assignment statement
        </td>
        <td>
            Align consecutive assignments
        </td>
        <td>
            变量等号对齐
        </td>
    </tr>
    <tr>
        <td rowspan = "2">
            Class field/constant groups（类成员/常量 分组）
        </td>
        <td>
            Align fields in columns
        </td>
        <td>
            类成员变量等号对齐
        </td>
    </tr>
    <tr>
        <td>
            Align constants
        </td>
        <td>
            类常量等号对齐
        </td>
    </tr>
    <tr>
        <td>
            Array initializer（数组初始）
        </td>
        <td>
            选择  Chop down if long
        </td>
        <td>
            当前模块的全部勾选
        </td>
    </tr>
    <tr>
        <td rowspan = "2">
            Code Conversion（代码转换）
        </td>
        <td rowspan = "2">
            Array Declaration Style
        </td>
        <td>
            Force short declaration style
        </td>
        <td>
            强制短声明样式（把array() 替换成 []）
        </td>
    </tr>
    <tr>
        <td>Add a comma after last element in multiline array</td>
        <td>在数组最后一个元素添加一个逗号</td>
    </tr>
    </tbody>
</table>



#### 格式化代码

```php
<?php

use N\{
	ClassName,
	AnotherClassName,
	OneMoreClassName
};

namespace A {
	function foo() { return 0; }

	function bar($x, $y, int $z = 1)
	{
		$x = 0;
		// $x = 1
		do {
			$y += 1;
		} while ($y < 10);
		if (true) $x = 10; elseif ($y < 10) $x = 5;
		else if (true) $x = 5;
		for ($i = 0; $i < 10; $i++) $yy = $x > 2 ? 1 : 2;
		while (true) $x = 0;
		do {
			$x += 1;
		} while (true);
		foreach ([
			"a" => 0,
			"b" => 1,
			"c" => 2,
		] as $e1) {
			echo $e1;
		}
		$count = 10;
		$x     = [
			"x",
			"y",
			[
				1 => "abc",
				2 => "def",
				3 => "ghi",
			],
		];
		$zz    = [
			0.1,
			0.2,
			0.3,
			0.4,
		];
		$x     = [
			0   => "zero",
			123 => "one two three",
			25  => "two five",
		];
		bar(0, bar(1, "b"));
	}

	abstract class Foo extends FooBaseClass implements Bar1, Bar2, Bar3
	{

		var    $numbers = [
			"one",
			"two",
			"three",
			"four",
			"five",
			"six",
		];
		var    $v       = 0;
		public $path    = "root";

		const FIRST  = 'first';
		const SECOND = 0;
		const Z      = -1;

		function bar($v, $w = "a")
		{
			$y      = $w;
			$result = foo("arg1", "arg2", 10);
			switch ($v) {
				case 0:
					return 1;
				case 1:
					echo '1';
					break;
				case 2:
					break;
				default:
					$result = 10;
			}
			return $result;
		}

		public static function fOne($argA, $argB, $argC, $argD, $argE, $argF, $argG, $argH)
		{
			$x = $argA + $argB + $argC + $argD + $argE + $argF + $argG + $argH;
			list($field1, $field2, $field3, $filed4, $field5, $field6) = explode(",", $x);
			fTwo($argA, $argB, $argC, fThree($argD, $argE, $argF, $argG, $argH));
			$z      = $argA == "Some string" ? "yes" : "no";
			$colors = [
				"red",
				"green",
				"blue",
				"black",
				"white",
				"gray",
			];
			$count  = count($colors);
			for ($i = 0; $i < $count; $i++) {
				$colorString = $colors[$i];
			}
		}

		function fTwo($strA, $strB, $strC, $strD)
		{
			if ($strA == "one" || $strB == "two" || $strC == "three") {
				return $strA + $strB + $strC;
			}
			$x = $foo->one("a", "b")->two("c", "d", "e")->three("fg")->four();
			$y = a()->b()->c();
			return $strD;
		}

		function fThree($strA, $strB, $strC, $strD, $strE)
		{
			try {
			} catch (Exception $e) {
				foo();
			} finally {
				// do something
			}
			return $strA + $strB + $strC + $strD + $strE;
		}

		protected abstract function fFour();

	}
}
```



### Git 快速提交

得益于前同事 `beaconfire` 的操作，让我了解到了 `phpstorm` 的 `git` 快捷操作。

步骤如下：

1. 配置 `git`
2. 更新代码 `ctrl + t`
3. 提交代码 `ctrl + k`
4. 在步骤3的前提下，`ctrl + alt + k` 可以直接推送代码，`PHPStorm` 高版本才有。
5. 如果没有执行步骤4，可以使用 `ctrl + shift + k` 推送已经提交的代码

其实这个步骤同 `svn` 一样，不过 `svn` 只有 1~3 步。

#### 更新代码 （Ctrl + T）

![](http://mcc-blog.test.upcdn.net/img/post-phpstorm_use_note/01.png)

**Update Type (更新类型)**

- `Merge` 合并的一种形式，大概意思是融合，融入
- `Rebase` 合并的一种形式，官方意思是`变基`、`重播`
- `Branch Default` 其实就是拉取当前远程分支，如 `git pull origin your/branch/name`

**Clean working tree before update (在更新之前清理工作树)**

- `Using Stash` [储藏](https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%82%A8%E8%97%8F%EF%BC%88Stashing%EF%BC%89) ,不用提交当前修改的代码便可拉取代码
- `Using Shelve` [搁置](https://www.jetbrains.com/help/idea/shelving-and-unshelving-changes.html#shelving) ,PHPStorm 独有（不是 Git 命令），存入了`.idea` 目录

下方的方框勾选不再提示，保存你首次选择。

### 快捷键

![](http://mcc-blog.test.upcdn.net/img/post-phpstorm_use_note/02.png)

**注：关于快捷键补充两句，常用的键如 ctrl + alt + a，ctrl + alt + l 等等和主流软件（QQ、网易云音乐等）会有冲突，遇到快捷键不能用的情况，使用快捷键检测工具检测。**